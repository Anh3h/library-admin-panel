<div *ngIf="progressBar" class="spinner">
  <div id="spinner"></div>
</div>
<div class="container">
  <h2>Users</h2>
  <mat-card class="table">
    <button class="addBtn" (click)="redirect('/users', 'create')" mat-button>
        New User
    </button>
    <mat-divider></mat-divider>
    <mat-table #table [dataSource]="datasource">
      <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
        <mat-cell *matCellDef="let user"> {{user.firstName}} {{user.lastName}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="username">
        <mat-header-cell *matHeaderCellDef> Username </mat-header-cell>
        <mat-cell *matCellDef="let user"> {{user.username}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="telephone">
        <mat-header-cell *matHeaderCellDef> Telephone </mat-header-cell>
        <mat-cell *matCellDef="let user"> {{user.telephone}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="role">
        <mat-header-cell *matHeaderCellDef> Role </mat-header-cell>
        <mat-cell *matCellDef="let user"> {{user.role.name}} </mat-cell>
      </ng-container>

      <ng-container matColumnDef="action">
        <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
        <mat-cell *matCellDef="let user">
          <button class="action" (click)="redirect('/users/', user.id)" mat-button>
            VIEW
          </button>
          <button class="action" (click)="redirect('/users/edit/', user.id)" mat-button>
           EDIT
          </button>
          <!-- <button class="action red" (click)="deleteUser(user.id)">
            DELETE
          </button> -->
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
    <app-paginator (goPrevious)="onPrevious()" (goNext)="onNext()" (goPage)="goToPage($event)"
    [loading]="progressBar" [paginator]="page"></app-paginator>
  </mat-card>
</div>
